- job:
    name: build-all-images
    project-type: freestyle
    defaults: global
    description: 'Do not edit this job through the web!'
    display-name: 'Build All Images'
    concurrent: false
    scm:
        - git:
            url: https://github.com/rhdt/EL-Dockerfiles.git
            shallow_clone: true
            branches:
                - master
    triggers:
        - pollscm:
            cron: "H/3 * * * *"
    builders:
        - shell: |
            ./build_all.sh

- job:
    name: fabric8-analytics-data-model
    project-type: freestyle
    defaults: global
    description: 'Do not edit this job through the web!'
    display-name: 'fabric8-analytics-data-model'
    concurrent: false
    scm:
        - git:
            url: https://github.com/rhdt/EL-Dockerfiles.git
            shallow_clone: true
            branches:
                - master
            sparse-checkout:
                paths:
                    - base/fabric8-analytics-data-model
            included-regions:
                - "base/fabric8-analytics-data-model/.*"
    triggers:
        - pollscm:
            cron: "H/3 * * * *"
    builders:
        - shell: |
            PushReg="push.registry.devshift.net"
            PushPath="osio-prod"
            img_tag="base/fabric8-analytics-data-model"
            PushTag="latest"
            cd base/fabric8-analytics-data-model/
            docker build --pull -t ${PushReg}/${PushPath}/${img_tag}:${PushTag} .
